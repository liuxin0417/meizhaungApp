{"version":3,"sources":["../../src/pages/second-to-buy/second-to-buy.module.ts","../../src/pages/second-to-buy/second-to-buy.ts"],"names":[],"mappings":"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","file":"28.js?v=107","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SecondToBuyPage } from './second-to-buy';\n\n@NgModule({\n  declarations: [\n    SecondToBuyPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SecondToBuyPage),\n  ],\n})\nexport class SecondToBuyPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/second-to-buy/second-to-buy.module.ts","import { HttpService } from './../../providers/HttpService';\nimport { NativeService } from './../../providers/NativeService';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { Parameter, Padding } from './../../model/Model';\nimport { Storage } from '@ionic/storage';\n\n@IonicPage()\n@Component({\n  selector: 'page-second-to-buy',\n  templateUrl: 'second-to-buy.html',\n})\nexport class SecondToBuyPage {\n  img = \"assets/imgs/temporary/banner.png\";\n  img1 = \"assets/imgs/temporary/3.png\";\n  private activityID: string = \"\";\n  Fh: any;\n  data: any;\n  goodlist: any;\n  private ActivityName = \"爱宝加活动\";\n  private state = 0;//0-未开始 1-开始中 2-结束\n  private padding = new Padding();\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    public nativeService: NativeService,\n    public httpService: HttpService,\n    private storage: Storage, ) {\n    this.activityID = this.navParams.get(\"goodsid\");\n    this.storage.get(\"userinfo\").then(val => {\n      if (val != null) {\n        this.Fh = val.address.FranchiseeID;\n        this.Load();\n      } else {\n\n      }\n    });\n  }\n\n  ionViewDidLoad() {\n\n  }\n  gotoseckill(item) {\n    if (this.state == 2) {\n      this.nativeService.showToast(\"活动已经结束\");\n      return false;\n    }\n    if (item.ResidueNum <= 0) {\n      this.nativeService.showToast(\"商品已售完\");\n      return false;\n    }\n    var info = {\n      ID: item.ID,\n      ActivityID: this.activityID,\n      ProductID: item.ProductID,\n      AcType: this.data.AcType\n    }\n    if (this.data.AcType == 4) {\n      this.navCtrl.push(\"SeckillPage\", {\n        seckInfo: info\n      });\n    } else {\n      this.navCtrl.push(\"GoodDetailPage\", {\n        goodsid: item.ProductID,\n        Fh: this.Fh,\n        seckInfo:info\n      });\n    }\n  }\n  /**加载活动下的商品 */\n  Load() {\n    var userInfo = {\n      activityID: this.activityID,\n      FraceID: this.Fh,\n      ipageStart: this.padding.ipageStart,\n      pageSize: this.padding.pageSize,\n    };\n    var parameter = new Parameter();\n    parameter.jyh = \"1115\";\n    parameter.parm = JSON.stringify(userInfo);\n    this.nativeService.showLoading(\"获取中\");\n    this.httpService.post(\"/MobService/Index\", parameter).map(res => res.json()).subscribe(res => {\n      this.nativeService.hideLoading();\n      var result = JSON.parse(res.result);\n      if (result.Code == 1) {\n        this.data = result.Data;\n        this.ActivityName = this.data.Name;\n        this.goodlist = JSON.parse(result.Data.productList);\n        var now = new Date();\n        var date = new Date(this.data.STime);\n        var date2 = new Date(this.data.ETime);\n        if (now > date && now < date2) {\n          this.state = 1;\n        } else if (now < date) {\n          this.state = 0;\n        } else if (now > date2) {\n          this.state = 2;\n        }\n        console.log(this.state);\n      } else {\n        /*  this.nativeService.showToast(result.Msg);\n         this.navCtrl.pop(); */\n      }\n    })\n  }\n  slice(string){\n    if(string!=''&&string!=null){\n      return string.slice(0,30)+\"...\"\n    }else{\n\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/second-to-buy/second-to-buy.ts"],"sourceRoot":""}