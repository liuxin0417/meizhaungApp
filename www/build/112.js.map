{"version":3,"sources":["../../src/pages/charge-type/charge-type.module.ts","../../src/providers/WechatPlugin.ts","../../src/pages/charge-type/charge-type.ts"],"names":[],"mappings":"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","file":"112.js?v=107","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ChargeTypePage } from './charge-type';\n\n@NgModule({\n  declarations: [\n    ChargeTypePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ChargeTypePage),\n  ],\n})\nexport class ChargeTypePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/charge-type/charge-type.module.ts","declare var Wechat: any;\r\n\r\nexport interface WechatPayParam {\r\n    appid: string;\r\n    partnerid: string;\r\n    prepayid: string;\r\n    package: string;\r\n    noncestr: string;\r\n    timestamp: string;\r\n    sign: string;\r\n}\r\n\r\nexport class WXScene {\r\n    public static WXSceneSession = \"WXSceneSession\";\r\n    public static WXSceneTimeline = \"WXSceneTimeline\";\r\n    public static WXSceneFavorite = \"WXSceneFavorite\";\r\n}\r\n\r\nexport class WechatPlugin {\r\n\r\n    public static isInstalled() {\r\n        return new Promise((resolve, reject) => {\r\n            Wechat.isInstalled(result => {\r\n                resolve(result);\r\n            }, error => {\r\n                reject(error);\r\n            });\r\n        });\r\n    }\r\n\r\n    public static sendPaymentRequest(params: WechatPayParam) {\r\n        return new Promise((resolve, reject) => {\r\n            Wechat.sendPaymentRequest(params, result => {\r\n                resolve(result);\r\n            }, error => {\r\n                reject(error);\r\n            });\r\n        });\r\n    }\r\n\r\n    public static ShareText(text: string) {\r\n        return new Promise((resolve, reject) => {\r\n            Wechat.share({\r\n                text: '逛贝微信分享测试',\r\n                scene: WXScene.WXSceneSession\r\n            }, result => {\r\n                alert(\"分享成功\");\r\n            }, error => {\r\n                alert(\"分享失败\");\r\n            });\r\n        })\r\n    }\r\n} \n\n\n// WEBPACK FOOTER //\n// ./src/providers/WechatPlugin.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { HttpService } from './../../providers/HttpService';\nimport { NativeService } from './../../providers/NativeService';\nimport { Storage } from '@ionic/storage';\nimport { Parameter } from './../../model/Model';\nimport { WechatPlugin } from '../../providers/WechatPlugin';\ndeclare var AliPay: any;\n\n@IonicPage()\n@Component({\n  selector: 'page-charge-type',\n  templateUrl: 'charge-type.html',\n})\nexport class ChargeTypePage {\n  paytype = 2;\n  img3 = \"assets/imgs/chone.png\";\n  img4 = \"assets/imgs/unchone.png\";\n  img2 = \"assets/imgs/eixin.png\";\n  img5 = \"assets/imgs/zhifun.png\";\n  userInfo: any;\n  money: any;\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    private httpService: HttpService,\n    private nativeService: NativeService,\n    private storage: Storage) {\n\n\n  }\n  ionViewWillEnter() {\n    this.storage.get(\"userinfo\").then(val => {\n      if (val != \"\") {\n        if (val.userinform.ID == \"\") {\n          this.navCtrl.push(\"LoginPage\",{showflag:true});\n        } else {\n          this.userInfo = val.userinform;\n        }\n      } else {\n        this.navCtrl.push(\"LoginPage\",{showflag:true});\n      }\n    });\n    this.money = this.navParams.get(\"price\");\n  }\n  ionViewDidLoad() {\n    //  console.log('ionViewDidLoad ChargeTypePage');\n  }\n  pay() {\n    var Info = {\n      UserID: this.userInfo.ID,\n      Money: this.money,\n      isweb: 0,\n      PayType: this.paytype\n    };\n    var parameter = new Parameter();\n    parameter.jyh = \"1132\";\n    parameter.parm = JSON.stringify(Info);\n    this.httpService.post(\"/MobService/Index\", parameter).map(res => res.json()).subscribe(res => {\n\n      var result = JSON.parse(res.result);\n      if (result.Code == 1) {\n        var data = result.Data;\n        if (this.paytype == 1) {\n          AliPay.pay(result.Msg, success => {\n            var msg = JSON.parse(success.result);\n            if (msg.alipay_trade_app_pay_response.msg == \"Success\") {\n              this.nativeService.showToast(\"支付订单成功\");\n              //this.navCtrl.pop();\n              this.navCtrl.setRoot(\"PaySuccessPage\", {\n                Info: this.money\n              });\n            }\n          }, error => {\n          });\n        } else if (this.paytype == 2) {\n          WechatPlugin.sendPaymentRequest(data).then((result) => {\n            this.nativeService.hideLoading();\n            this.nativeService.showToast(\"支付订单成功\");\n            //this.navCtrl.pop();\n            this.navCtrl.setRoot(\"PaySuccessPage\", {\n              Info: this.money\n            });\n          }, error => {\n            this.nativeService.showToast(error);\n          });\n        } else {\n\n        }\n\n        /* wx.chooseWXPay({\n          timestamp: data.timestamp, // 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符\n          nonceStr: data.noncestr, // 支付签名随机串，不长于 32 位\n          package: data.package, // 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=\\*\\*\\*）\n          signType: data.signType, // 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'\n          paySign: data.sign, // 支付签名\n          success: function (res) {\n            if (res.chooseWXPay == \"ok\") {\n              that.navCtrl.pop();\n            }\n          }\n        }); */\n      } else {\n        this.nativeService.showToast(result.Msg);\n      }\n      this.nativeService.hideLoading();\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/charge-type/charge-type.ts"],"sourceRoot":""}