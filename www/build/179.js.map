{"version":3,"sources":["../../src/pages/chat/chat.module.ts","../../src/pages/chat/chat.ts"],"names":[],"mappings":"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","file":"179.js?v=107","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ChatPage } from './chat';\n\n@NgModule({\n  declarations: [\n    ChatPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ChatPage),\n  ],\n})\nexport class ChatPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat/chat.module.ts","import { Component,ViewChild } from '@angular/core';\nimport { IonicPage, NavController, NavParams,} from 'ionic-angular';\nimport { Storage } from '@ionic/storage';\nimport { Parameter } from './../../model/Model';\nimport { HttpService } from './../../providers/HttpService';\nimport { NativeService } from './../../providers/NativeService';\nimport { ActionSheetController,Content} from 'ionic-angular';\n//import { combineAll } from 'rxjs/operator/combineAll';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-chat',\n  templateUrl: 'chat.html',\n})\nexport class ChatPage {\n  img = \"assets/imgs/temporary/3.png\";\n  img1 = \"assets/imgs/jinru--hui.png\";\n  img2 = \"assets/imgs/singer1.png\";\n  img3 = \"assets/imgs/singer2.png\";\n  img7 = \"assets/imgs/write.png\";\n  img8 = \"assets/imgs/fasong.png\";\n  proid: any;\n  textarea = \"\";\n  userID: any;\n  list: any;\n  picurl: any;\n  name: any;\n  @ViewChild(Content) content: Content;\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    //private app: App,\n    private storage: Storage,\n    private httpService: HttpService,\n    private nativeService: NativeService,\n    public actionSheetCtrl: ActionSheetController,\n    /* private modalCtrl: ModalController, */ ) {\n    this.proid = navParams.get(\"proid\");\n    this.name = navParams.get(\"name\").slice(0, 20) + \"...\";;\n    this.picurl = navParams.get(\"picurl\");\n    this.storage.get(\"userinfo\").then(val => {\n      if (val != null) {\n        ////console.info(val);\n        this.userID = val.userinform.ID,\n        \n        this.chat();\n        this.scrollToBottom(100);\n      }\n      else {\n      }\n    });\n  }\n  ask() {\n    if (this.textarea == '') {\n      this.nativeService.showToast(\"评论内容不能为空！\");\n      return;\n    } else {\n      var userInfo = {\n        UserID: this.userID,\n        proID: this.proid,\n        comcontent: this.textarea,\n      };\n    }\n    ////console.info(userInfo);\n    var parameter = new Parameter();\n    parameter.jyh = \"1088\";\n    parameter.parm = JSON.stringify(userInfo);\n    this.nativeService.showLoading(\"获取中\");\n    this.httpService.post(\"/MobService/Index\", parameter).map(res => res.json()).subscribe(res => {\n      this.nativeService.hideLoading();\n      var result = JSON.parse(res.result);\n      ////console.info(result);\n      if (result.Code == 1) {\n        this.textarea = \"\";\n        this.chat();\n        this.scrollToBottom(400);\n      } else {\n        this.nativeService.showToast(result.Msg);\n      }\n\n    })\n  }\n  scrollToBottom(number) {\n    setTimeout(() => {\n      // console.log(this.content.scrollToBottom);\n      if (this.content != null) {\n        if (this.content._scroll != null) {\n          this.content.scrollToBottom();\n        }\n        // if(this.content.scrollToBottom)\n      }\n    }, number);\n  }\n\n  splice(item) {\n    return item.split(\"T\")[0];\n  }\n  chat() {\n    if (this.userID == \"\") {\n      return;\n    } else {\n      var userInfo = {\n        UserID: this.userID,\n        proID: this.proid,\n      }\n      var parameter = new Parameter();\n      parameter.jyh = \"1087\";\n      parameter.parm = JSON.stringify(userInfo);\n      this.nativeService.showLoading(\"获取中\");\n      this.httpService.post(\"/MobService/Index\", parameter).map(res => res.json()).subscribe(res => {\n        this.nativeService.hideLoading();\n        var result = JSON.parse(res.result);\n        //console.log(result);\n        if (result.Code == \"1\") {\n\n          this.list = result.Data;\n          //console.log(this.list);\n        } else {\n        }\n      });\n    }\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat/chat.ts"],"sourceRoot":""}