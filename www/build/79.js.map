{"version":3,"sources":["../../src/pages/coupon-list/coupon-list.module.ts","../../src/pages/coupon-list/coupon-list.ts"],"names":[],"mappings":"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","file":"79.js?v=107","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CouponListPage } from './coupon-list';\n\n@NgModule({\n  declarations: [\n    CouponListPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(CouponListPage),\n  ],\n})\nexport class CouponListPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/coupon-list/coupon-list.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController,InfiniteScroll } from 'ionic-angular';\nimport { Storage } from '@ionic/storage';\nimport { HttpService } from './../../providers/HttpService';\nimport { NativeService } from './../../providers/NativeService';\nimport { Parameter, Padding } from './../../model/Model';\nimport { InfiniteScrollService } from './../../providers/InfiniteScrollService';\n/**\n * Generated class for the CouponListPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-coupon-list',\n  templateUrl: 'coupon-list.html',\n})\nexport class CouponListPage {\n  number = 1;\n  userID: any;\n  conponList: any;\n  choseNum: any;\n  showList: any;\n  isshow=true;\n  coupondes=[];\n  private padding = new Padding();\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    private httpService: HttpService,\n    private nativeService: NativeService,\n    private storage: Storage,\n    public alertCtrl: AlertController,\n    public Inservice: InfiniteScrollService ) {\n  }\n  ionViewWillEnter() {\n    this.storage.get(\"userinfo\").then(val => {\n      if (val != \"\" && val != null) {\n        if (val.userinform.ID == \"\") {\n          this.navCtrl.push(\"LoginPage\",{showflag:true});\n        } else {\n          this.userID = val.userinform.ID;\n          this.load();\n        }\n      } else {\n      }\n    })\n  }\n  ionViewDidLoad() {\n  }\n  load() {\n    var userInfo = {\n      UserID: this.userID,\n      ipageStart: this.padding.ipageStart,\n      pageSize: this.padding.pageSize,\n      // type: this.number,\n      type: 0,\n    }\n    ////console.info(userInfo)\n    var parameter = new Parameter();\n    parameter.jyh = \"1116\";\n    this.nativeService.showLoading(\"获取中\");\n    parameter.parm = JSON.stringify(userInfo);\n    this.httpService.post(\"/MobService/Index\", parameter).map(res => res.json()).subscribe(res => {\n      var result = JSON.parse(res.result);\n      //console.info(result)\n      this.nativeService.hideLoading();\n      if (result.Code == 1) {\n        // this.nativeService.showToast(result.Msg);\n        this.conponList = result.Data;\n      } else {\n        this.nativeService.showToast(result.Msg);\n      }\n\n    })\n  }\n  getDetail(item, i) {\n    for(var n=0;n<this.coupondes.length;n++){\n      if(item.ID==this.coupondes[n].CouponID&&item.UsingRange==this.coupondes[n].UsingRange){\n        this.showList = this.coupondes[n].Name;\n        this.choseNum = i;\n        return;\n      }else{\n\n      }\n    }\n    var userInfo = {\n      CouponID: item.ID,\n      UsingRange: item.UsingRange,\n    }\n    ////console.info(userInfo)\n    var parameter = new Parameter();\n    parameter.jyh = \"1142\";\n    this.nativeService.showLoading(\"获取中\");\n    parameter.parm = JSON.stringify(userInfo);\n    this.httpService.post(\"/MobService/Index\", parameter).map(res => res.json()).subscribe(res => {\n      var result = JSON.parse(res.result);\n      //console.info(result)\n      this.nativeService.hideLoading();\n      if (result.Code == 1) {\n        var arr={\n          \"CouponID\":item.ID,\n          \"UsingRange\": item.UsingRange,\n          \"Name\":[]\n        }\n        this.coupondes.push(arr);\n        arr.Name= result.Data\n        this.showList = result.Data;\n        this.choseNum = i;\n        // this.nativeService.showToast(result.Msg);\n        // this.conponList = result.Data;\n      } else {\n        this.nativeService.showToast(result.Msg);\n      }\n\n    })\n  }\n  type(number) {\n    this.number = number;\n    this.load();\n  }\n  getCoupon(item) {\n    var userInfo = {\n      UserID: this.userID,\n      ID: item.ID,\n    }\n    var parameter = new Parameter();\n    parameter.jyh = \"1119\";\n    this.nativeService.showLoading(\"获取中\");\n    parameter.parm = JSON.stringify(userInfo);\n    this.httpService.post(\"/MobService/Index\", parameter).map(res => res.json()).subscribe(res => {\n      var result = JSON.parse(res.result);\n      //console.info(result)\n      this.nativeService.hideLoading();\n      if (result.Code == 1) {\n        item.isL = true;\n        // this.nativeService.showToast(result.Msg);\n        this.nativeService.showToast(result.Msg);\n      } else {\n        this.nativeService.showToast(result.Msg);\n      }\n\n    })\n  }\n  gotoUse(item) {\n    //console.info(item)\n    this.navCtrl.push(\"SearchPage\", {\n      CouponID: item.ID,\n    })\n  }\n  resest() {\n    this.choseNum = -1;\n  }\n  doInfinite(infiniteScroll: InfiniteScroll) {\n    /* infiniteScroll.enable(true); */\n    ////console.info(\"运行了下拉加载\");\n    if (this.conponList.length < (this.padding.ipageStart + 1) * this.padding.pageSize) {\n      this.isshow = false;\n      return;\n    }\n    this.padding.ipageStart += 1;\n    var pageInfo = {\n      UserID: this.userID,\n      ipageStart: this.padding.ipageStart,\n      pageSize: this.padding.pageSize,\n      // type: this.number,\n      type: 0,\n    };\n    var parm = new Parameter();\n    parm.jyh = \"1116\";\n    parm.parm = JSON.stringify(pageInfo);\n    this.Inservice.getAsyncData(\"/MobService/Index\", parm).map(res => res.json()).subscribe((newData) => {\n      setTimeout(() => {\n        var newList: any;\n        var msg = JSON.parse(newData.result);\n        newList = msg.Data;\n        if (newList != null || newList != undefined) {\n          for (var i = 0; i < newList.length; i++) {\n            this.conponList.push(newList[i]);\n          }\n        }\n        if (newData.length < this.padding.pageSize) {\n          this.isshow = false;\n        }\n        infiniteScroll.complete();\n      }, 1000);\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/coupon-list/coupon-list.ts"],"sourceRoot":""}