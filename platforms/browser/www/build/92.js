webpackJsonp([92],{651:function(n,l,t){"use strict";function e(n){return i["ɵvid"](0,[(n()(),i["ɵeld"](0,null,null,39,"div",[["style","width:100%;height:100%;"]],null,null,null,null,null)),(n()(),i["ɵted"](null,["\n    "])),(n()(),i["ɵeld"](0,null,null,3,"div",[["class","logoimg"]],null,null,null,null,null)),(n()(),i["ɵted"](null,["\n      "])),(n()(),i["ɵeld"](0,null,null,0,"img",[["alt",""],["tappable",""]],[[8,"src",4]],[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.gotohome()&&e),e},null,null)),(n()(),i["ɵted"](null,["\n    "])),(n()(),i["ɵted"](null,["\n    "])),(n()(),i["ɵeld"](0,null,null,9,"div",[["class","phonenum"]],null,null,null,null,null)),(n()(),i["ɵted"](null,["\n      "])),(n()(),i["ɵeld"](0,null,null,6,"input",[["placeholder","请输入手机号"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(n,l,t){var e=!0,o=n.component;return"input"===l&&(e=!1!==i["ɵnov"](n,10)._handleInput(t.target.value)&&e),"blur"===l&&(e=!1!==i["ɵnov"](n,10).onTouched()&&e),"compositionstart"===l&&(e=!1!==i["ɵnov"](n,10)._compositionStart()&&e),"compositionend"===l&&(e=!1!==i["ɵnov"](n,10)._compositionEnd(t.target.value)&&e),"change"===l&&(e=!1!==i["ɵnov"](n,11).onChange(t.target.value)&&e),"input"===l&&(e=!1!==i["ɵnov"](n,11).onChange(t.target.value)&&e),"blur"===l&&(e=!1!==i["ɵnov"](n,11).onTouched()&&e),"ngModelChange"===l&&(e=!1!==(o.phonenum=t)&&e),e},null,null)),i["ɵdid"](16384,null,0,E.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,E.COMPOSITION_BUFFER_MODE]],null,null),i["ɵdid"](16384,null,0,E["ɵbc"],[i.Renderer2,i.ElementRef],null,null),i["ɵprd"](1024,null,E.NG_VALUE_ACCESSOR,function(n,l){return[n,l]},[E.DefaultValueAccessor,E["ɵbc"]]),i["ɵdid"](671744,null,0,E.NgModel,[[8,null],[8,null],[8,null],[2,E.NG_VALUE_ACCESSOR]],{model:[0,"model"]},{update:"ngModelChange"}),i["ɵprd"](2048,null,E.NgControl,null,[E.NgModel]),i["ɵdid"](16384,null,0,E.NgControlStatus,[E.NgControl],null,null),(n()(),i["ɵted"](null,["\n    "])),(n()(),i["ɵted"](null,["\n    "])),(n()(),i["ɵeld"](0,null,null,8,"div",[["class","password"]],null,null,null,null,null)),(n()(),i["ɵted"](null,["\n      "])),(n()(),i["ɵeld"](0,null,null,5,"input",[["placeholder","密码"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,t){var e=!0,o=n.component;return"input"===l&&(e=!1!==i["ɵnov"](n,21)._handleInput(t.target.value)&&e),"blur"===l&&(e=!1!==i["ɵnov"](n,21).onTouched()&&e),"compositionstart"===l&&(e=!1!==i["ɵnov"](n,21)._compositionStart()&&e),"compositionend"===l&&(e=!1!==i["ɵnov"](n,21)._compositionEnd(t.target.value)&&e),"ngModelChange"===l&&(e=!1!==(o.password=t)&&e),e},null,null)),i["ɵdid"](16384,null,0,E.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,E.COMPOSITION_BUFFER_MODE]],null,null),i["ɵprd"](1024,null,E.NG_VALUE_ACCESSOR,function(n){return[n]},[E.DefaultValueAccessor]),i["ɵdid"](671744,null,0,E.NgModel,[[8,null],[8,null],[8,null],[2,E.NG_VALUE_ACCESSOR]],{model:[0,"model"]},{update:"ngModelChange"}),i["ɵprd"](2048,null,E.NgControl,null,[E.NgModel]),i["ɵdid"](16384,null,0,E.NgControlStatus,[E.NgControl],null,null),(n()(),i["ɵted"](null,["\n    "])),(n()(),i["ɵted"](null,["\n    "])),(n()(),i["ɵeld"](0,null,null,1,"div",[["class","login-btn"],["tappable",""]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.login()&&e),e},null,null)),(n()(),i["ɵted"](null,["\n      登录\n    "])),(n()(),i["ɵted"](null,["\n    "])),(n()(),i["ɵeld"](0,null,null,7,"div",[["class","loginmore"]],null,null,null,null,null)),(n()(),i["ɵted"](null,["\n      "])),(n()(),i["ɵeld"](0,null,null,1,"div",[["tappable",""]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.gotoresgiter()&&e),e},null,null)),(n()(),i["ɵted"](null,["注册账户"])),(n()(),i["ɵted"](null,["\n      "])),(n()(),i["ɵeld"](0,null,null,1,"div",[["tappable",""]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.gotoreset()&&e),e},null,null)),(n()(),i["ɵted"](null,["忘记密码"])),(n()(),i["ɵted"](null,["\n    "])),(n()(),i["ɵted"](null,["\n  "]))],function(n,l){var t=l.component;n(l,13,0,t.phonenum),n(l,23,0,t.password)},function(n,l){n(l,4,0,l.component.img),n(l,9,0,i["ɵnov"](l,15).ngClassUntouched,i["ɵnov"](l,15).ngClassTouched,i["ɵnov"](l,15).ngClassPristine,i["ɵnov"](l,15).ngClassDirty,i["ɵnov"](l,15).ngClassValid,i["ɵnov"](l,15).ngClassInvalid,i["ɵnov"](l,15).ngClassPending),n(l,20,0,i["ɵnov"](l,25).ngClassUntouched,i["ɵnov"](l,25).ngClassTouched,i["ɵnov"](l,25).ngClassPristine,i["ɵnov"](l,25).ngClassDirty,i["ɵnov"](l,25).ngClassValid,i["ɵnov"](l,25).ngClassInvalid,i["ɵnov"](l,25).ngClassPending)})}function o(n){return i["ɵvid"](0,[(n()(),i["ɵted"](null,["\n\n"])),(n()(),i["ɵeld"](0,null,null,7,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],[["window","resize"]],function(n,l,t){var e=!0;return"window:resize"===l&&(e=!1!==i["ɵnov"](n,2).resize()&&e),e},D.b,D.a)),i["ɵdid"](4374528,null,0,x.a,[F.a,L.a,T.a,i.ElementRef,i.Renderer,A.a,j.a,i.NgZone,[2,U.a],[2,k.a]],null,null),(n()(),i["ɵted"](1,["\n  "])),(n()(),i["ɵted"](1,["\n\n  "])),(n()(),i["ɵand"](16777216,null,1,1,null,e)),i["ɵdid"](16384,null,0,V.i,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),i["ɵted"](1,["\n  "])),(n()(),i["ɵted"](1,["\n\n"]))],function(n,l){n(l,6,0,l.component.showflag)},function(n,l){n(l,1,0,i["ɵnov"](l,2).statusbarPadding,i["ɵnov"](l,2)._hasRefresher)})}Object.defineProperty(l,"__esModule",{value:!0});var i=t(1),a=t(0),s=t(32),u=t(164),r=t(59),d=t(58),g=t(109),c=function(){function n(n,l,t,e,o,i,a){var s=this;this.navCtrl=n,this.navParams=l,this.httpService=t,this.nativeService=e,this.app=o,this.storage=i,this.modalCtrl=a,this.img="assets/imgs/guanbi.png",this.tabindex=0,this.adpic="assets/imgs/temporary/adpic.png",this.showflag=!1,this.showimg=!1,this.popFlag=!1,this.storage.get("userinfo").then(function(n){null!=n&&(s.wxInfo=n)}),this.tabindex=this.navParams.get("tabindex"),this.showflag=this.navParams.get("showflag"),this.popFlag=this.navParams.get("popFlag"),e.log("LoginPage","this.showflag>"+this.showflag),e.log("LoginPage","this.tabindex>"+this.tabindex),e.log("LoginPage","this.popFlag>"+this.popFlag),1==this.showflag?this.showimg=!0:(this.showflag=!0,this.showimg=!0)}return n.prototype.ionViewWillEnter=function(){},n.prototype.ionViewDidLoad=function(){},n.prototype.goWhere=function(){var n=this;if(1!=this.showflag){var l=[];console.info("login page  goWhere");var t=location.href.split("?");if(this.flag=t[1],void 0!=this.flag&&null!=this.flag){var e=[];e=this.flag.split("="),this.flag1=e[0],this.flag2=e[1]}else this.showimg?setTimeout(function(){n.app.getRootNav().setRoot("TabsPage")},2e3):this.app.getRootNav().setRoot("TabsPage");if(console.info(" login page this.flag1》》》》"+this.flag1),"resigiter"==this.flag1)l=[],l=this.flag2.split("&"),this.flag2=l[0].split("#")[0].trim(),this.app.getRootNav().setRoot("ResigiterPage",{tabId:this.flag2});else if("login"==this.flag1)l=[],l=this.flag2.split("&"),this.flag2=l[0].split("#")[0].trim(),this.storage.set("UID",this.flag2),this.app.getRootNav().setRoot("TabsPage",{tabId:0});else if("goodsDetail"==this.flag1){l=[];var o=(l=this.flag2.split("&"))[0].split("#")[0].trim();this.flag2=o.split("UID:")[0];var i=o.split("UID:")[1];this.storage.set("UID",i),this.app.getRootNav().setRoot("GoodDetailPage",{goodsid:this.flag2})}else"shopIndex"==this.flag1?(l=[],l=this.flag2.split("&"),this.flag2=l[0].split("#")[0].trim(),this.app.getRootNav().setRoot("ShopIndexPage",{ShopID:this.flag2})):this.app.getRootNav().setRoot("TabsPage")}},n.prototype.gotoresgiter=function(){this.modalCtrl.create("ResigiterPage",{showflag:!0}).present()},n.prototype.gotoreset=function(){this.modalCtrl.create("ForgotPasswordPage",{showflag:!0}).present()},n.prototype.login=function(){var n=this;if(this.nativeService.log("LoginPage","login come"),""!=this.phonenum)if(11==this.phonenum.toString().length)if(void 0!=this.password&&void 0!=this.password&&""!=this.password){var l={LoginName:this.phonenum,Pwd:this.password,openId:null!=this.wxInfo?this.wxInfo.openId:"",nickName:null!=this.wxInfo?this.wxInfo.nickName:"",HeadUrl:null!=this.wxInfo?this.wxInfo.HeadUrl:""},t=new u.f;t.jyh="1001",t.parm=JSON.stringify(l),this.nativeService.showLoading("获取中"),this.httpService.post("/MobService/Index",t).map(function(n){return n.json()}).subscribe(function(l){n.nativeService.hideLoading();var t=JSON.parse(l.result);if(1!=t.Code)n.nativeService.showToast(t.Msg);else{var e=[];t.Data.FranchiseeID=1,n.storage.set("userinfo",{address:e,userinform:t.Data}).then(function(l){n.nativeService.log("LoginPage","login back set root>"+n.tabindex),n.navCtrl.pop()})}})}else this.nativeService.showToast("请输入密码");else this.nativeService.showToast("请输入正确手机号");else this.nativeService.showToast("手机号码号码不能为空")},n.prototype.gotohome=function(){this.app.getRootNav().setRoot("TabsPage"),this.nativeService.log("LoginPage","gotohome >"+this.tabindex),this.nativeService.log("LoginPage","his.app.getRootNavs()[0] >"+this.app.getRootNavs().length),this.nativeService.log("LoginPage","this.app.getActiveNav()>"+this.app.getActiveNav().id)},n}();c=Object(a.__decorate)([Object(i.Component)({selector:"page-login",templateUrl:"login.html"}),Object(a.__metadata)("design:paramtypes",["function"==typeof(p=void 0!==s.NavController&&s.NavController)&&p||Object,"function"==typeof(h=void 0!==s.NavParams&&s.NavParams)&&h||Object,"function"==typeof(v=void 0!==r.a&&r.a)&&v||Object,"function"==typeof(f=void 0!==d.a&&d.a)&&f||Object,"function"==typeof(m=void 0!==s.App&&s.App)&&m||Object,"function"==typeof(b=void 0!==g.b&&g.b)&&b||Object,"function"==typeof(C=void 0!==s.ModalController&&s.ModalController)&&C||Object])],c);var p,h,v,f,m,b,C,w=function(){return function(){}}();w=Object(a.__decorate)([Object(i.NgModule)({declarations:[c],imports:[s.IonicPageModule.forChild(c)]})],w);var R=t(294),N=t(295),S=t(296),P=t(297),y=t(298),I=t(299),_=t(300),O=t(301),M=t(302),E=t(22),D=t(701),x=t(33),F=t(3),L=t(6),T=t(13),A=t(12),j=t(48),U=t(7),k=t(30),V=t(28),z=t(15),G=t(110),B=t(113),J=i["ɵcrt"]({encapsulation:2,styles:[],data:{}}),W=i["ɵccf"]("page-login",c,function(n){return i["ɵvid"](0,[(n()(),i["ɵeld"](0,null,null,1,"page-login",[],null,null,null,o,J)),i["ɵdid"](49152,null,0,c,[k.a,z.a,r.a,d.a,A.a,G.a,B.a],null,null)],null,null)},{},{},[]),q=t(163),H=t(52);t.d(l,"LoginPageModuleNgFactory",function(){return Z});var Z=i["ɵcmf"](w,[],function(n){return i["ɵmod"]([i["ɵmpd"](512,i.ComponentFactoryResolver,i["ɵCodegenComponentFactoryResolver"],[[8,[R.a,N.a,S.a,P.a,y.a,I.a,_.a,O.a,M.a,W]],[3,i.ComponentFactoryResolver],i.NgModuleRef]),i["ɵmpd"](4608,V.k,V.j,[i.LOCALE_ID]),i["ɵmpd"](4608,E["ɵi"],E["ɵi"],[]),i["ɵmpd"](4608,E.FormBuilder,E.FormBuilder,[]),i["ɵmpd"](512,V.b,V.b,[]),i["ɵmpd"](512,E["ɵba"],E["ɵba"],[]),i["ɵmpd"](512,E.FormsModule,E.FormsModule,[]),i["ɵmpd"](512,E.ReactiveFormsModule,E.ReactiveFormsModule,[]),i["ɵmpd"](512,q.a,q.a,[]),i["ɵmpd"](512,q.b,q.b,[]),i["ɵmpd"](512,w,w,[]),i["ɵmpd"](256,H.a,c,[])])})},701:function(n,l,t){"use strict";function e(n){return o["ɵvid"](2,[o["ɵqud"](402653184,1,{_fixedContent:0}),o["ɵqud"](402653184,2,{_scrollContent:0}),(n()(),o["ɵeld"](0,[[1,0],["fixedContent",1]],null,1,"div",[["class","fixed-content"]],null,null,null,null,null)),o["ɵncd"](null,0),(n()(),o["ɵeld"](0,[[2,0],["scrollContent",1]],null,1,"div",[["class","scroll-content"]],null,null,null,null,null)),o["ɵncd"](null,1),o["ɵncd"](null,2)],null,null)}t.d(l,"a",function(){return p}),l.b=e;var o=t(1),i=t(33),a=t(3),s=t(6),u=t(13),r=t(12),d=t(48),g=t(7),c=t(30),p=o["ɵcrt"]({encapsulation:2,styles:[],data:{}});o["ɵccf"]("ion-content",i.a,function(n){return o["ɵvid"](0,[(n()(),o["ɵeld"](0,null,null,1,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],[["window","resize"]],function(n,l,t){var e=!0;return"window:resize"===l&&(e=!1!==o["ɵnov"](n,1).resize()&&e),e},e,p)),o["ɵdid"](4374528,null,0,i.a,[a.a,s.a,u.a,o.ElementRef,o.Renderer,r.a,d.a,o.NgZone,[2,g.a],[2,c.a]],null,null)],null,function(n,l){n(l,0,0,o["ɵnov"](l,1).statusbarPadding,o["ɵnov"](l,1)._hasRefresher)})},{color:"color",mode:"mode",fullscreen:"fullscreen",scrollDownOnLoad:"scrollDownOnLoad"},{ionScrollStart:"ionScrollStart",ionScroll:"ionScroll",ionScrollEnd:"ionScrollEnd"},["[ion-fixed],ion-fab","*","ion-refresher"])}});