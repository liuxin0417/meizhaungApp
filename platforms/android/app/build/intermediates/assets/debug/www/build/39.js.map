{"version":3,"sources":["../../src/pages/recharge/recharge.module.ts","../../src/pages/recharge/recharge.ts"],"names":[],"mappings":"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","file":"39.js?v=107","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { RechargePage } from './recharge';\n\n@NgModule({\n  declarations: [\n    RechargePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(RechargePage),\n  ],\n})\nexport class RechargePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/recharge/recharge.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { HttpService } from './../../providers/HttpService';\nimport { NativeService } from './../../providers/NativeService';\nimport { Storage } from '@ionic/storage';\nimport { Parameter } from './../../model/Model';\n// import { WechatPlugin } from '../../providers/WechatPlugin';\ndeclare var wx: any;\n// declare var AliPay: any;\n\n@IonicPage()\n@Component({\n  selector: 'page-recharge',\n  templateUrl: 'recharge.html',\n})\nexport class RechargePage {\n  userID: any;\n  list: any;\n  private isweb: any;\n  private userInfo: any;\n  private recharMoney: number;\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    private httpService: HttpService,\n    private nativeService: NativeService,\n    private storage: Storage\n  ) {\n    this.storage.get(\"userinfo\").then(val => {\n      if (val != \"\") {\n        if (val.userinform.ID == \"\") {\n          this.navCtrl.push(\"LoginPage\",{showflag:true});\n        } else {\n          this.userInfo = val.userinform;\n        }\n      } else {\n        this.navCtrl.push(\"LoginPage\",{showflag:true});\n      }\n    });\n    this.isweb = !this.nativeService.isMobile();\n  }\n  ionViewWillEnter() {\n\n  }\n  ionViewDidLoad() {\n    this.login();\n  }\n  login() {\n    /* var userInfo = {\n      UserID:this.userID,\n    } */\n    var parameter = new Parameter();\n    parameter.jyh = \"1128\";\n    parameter.parm = \"\";\n    this.nativeService.showLoading(\"获取中\");\n    this.httpService.post(\"/MobService/Index\", parameter).map(res => res.json()).subscribe(res => {\n      this.nativeService.hideLoading();\n      var result = JSON.parse(res.result);\n      if (result.Code == 1) {\n        this.list = result.Data\n      } else {\n        this.nativeService.showToast(result.Msg);\n      }\n\n    })\n  }\n\n  recharge() {\n    if (this.recharMoney == null || this.recharMoney == undefined) {\n      this.nativeService.showToast(\"请输入充值金额\");\n      return false;\n    }\n    if (this.recharMoney <= 0) {\n      this.nativeService.showToast(\"请输入大于零的金额\");\n      return false;\n    }\n    if (this.nativeService.isMobile()) {\n      this.navCtrl.push(\"ChargeTypePage\", {\n        price: this.recharMoney,\n      });\n    } else {\n      this.submit(this.recharMoney);\n    }\n    /* this.navCtrl.push(\"ChargeTypePage\",{\n      price:this.recharMoney,\n    }); */\n  }\n  skip(item) {\n    // if (this.nativeService.isMobile()) {\n\n    //   this.navCtrl.push(\"ChargeTypePage\", {\n    //     price: item.UseMoney,\n    //   });\n    // } else {\n    //   this.submit(item.UseMoney);\n    // }\n    this.submit(item.UseMoney);\n  }\n  /**充值提交或者跳转 */\n  submit(money) {\n    if (this.isweb) {\n      var Info = {\n        UserID: this.userInfo.ID,\n        Money: money,\n        isweb: 1,\n        PayType: 2\n      };\n      var parameter = new Parameter();\n      parameter.jyh = \"1132\";\n      parameter.parm = JSON.stringify(Info);\n      this.nativeService.showLoading();\n      this.httpService.post(\"/MobService/Index\", parameter).map(res => res.json()).subscribe(res => {\n        var result = JSON.parse(res.result);\n        if (result.Code == 1) {\n          var data = result.Data;\n          var that = this;\n          that.nativeService.hideLoading();\n          wx.chooseWXPay({\n            timestamp: data.timestamp, // 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符\n            nonceStr: data.noncestr, // 支付签名随机串，不长于 32 位\n            package: data.package, // 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=\\*\\*\\*）\n            signType: data.signType, // 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'\n            paySign: data.sign, // 支付签名\n            success: function (res) {\n              that.navCtrl.setRoot(\"PaySuccessPage\", {\n                Info: money\n              });\n            }\n          });\n        } else {\n          this.nativeService.hideLoading();\n        }\n      });\n    } else {\n      /**跳转到支付界面 */\n      this.navCtrl.push(\"ChargeTypePage\", {\n        price: money,\n      });\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/recharge/recharge.ts"],"sourceRoot":""}