{"version":3,"sources":["../../src/pages/search/search.module.ts","../../src/pages/search/search.ts"],"names":[],"mappings":"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","file":"30.js?v=107","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SearchPage } from './search';\n\n@NgModule({\n  declarations: [\n    SearchPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SearchPage),\n  ],\n})\nexport class SearchPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search/search.module.ts","import { Component, ElementRef } from '@angular/core';\nimport { IonicPage, NavController, NavParams, InfiniteScroll } from 'ionic-angular';\nimport { Storage } from '@ionic/storage';\nimport { HttpService } from './../../providers/HttpService';\nimport { NativeService } from './../../providers/NativeService';\nimport { Parameter, Padding } from './../../model/Model';\nimport { ViewChild } from '@angular/core';\nimport { InfiniteScrollService } from './../../providers/InfiniteScrollService';\n/**\n * Generated class for the SearchPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-search',\n  templateUrl: 'search.html',\n})\nexport class SearchPage {\n  @ViewChild('inputpart')\n  inputpart: ElementRef;\n  img9 = \"assets/imgs/fanhui2.png\";\n  img10 = \"assets/imgs/cheat.png\";\n  img11 = \"assets/imgs/search.png\";\n  middle = \"assets/imgs/new/middle.png\";\n  list = [];\n  img = \"assets/imgs/temporary/shangpin2.png\";\n  activity = \"assets/imgs/new/activity.png\";\n  message: any;\n  private padding = new Padding();\n  FranchiseeID: any;\n  CouponID: any;\n  noshow = false;\n  isshow = true;\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    private httpService: HttpService,\n    private nativeService: NativeService,\n    private storage: Storage,\n    public Inservice: InfiniteScrollService) {\n    this.CouponID = this.navParams.get(\"CouponID\")\n\n    this.storage.get(\"userinfo\").then(val => {\n\n    })\n    this.FranchiseeID = \"\";\n    \n    if (this.CouponID == null || this.CouponID == undefined || this.CouponID == \"\") {\n      this.CouponID = \"\"\n    } else {\n      this.message = \"\"\n      this.search2();\n    }\n  }\n\n  ionViewDidLoad() {\n    setTimeout(() => {\n      let inputpart = this.inputpart.nativeElement;\n      inputpart.focus();\n    }, 600);\n  }\n  goback() {\n    this.navCtrl.pop();\n  }\n  search() {\n    if (this.message == \"\") {\n      this.nativeService.showToast(\"请填写查询信息\");\n      return\n    } else {\n\n    }\n    // this.CouponID=\"\";\n    var userInfo = {\n      ipageStart: this.padding.ipageStart,\n      pageSize: this.padding.pageSize,\n      FranchiseeID: this.FranchiseeID,\n      goodName: this.message,\n      CouponID: this.CouponID\n    };\n    // //console.info(userInfo);\n    var parameter = new Parameter();\n    parameter.jyh = \"1037\";\n    parameter.parm = JSON.stringify(userInfo);\n    this.nativeService.showLoading(\"获取中\");\n    this.httpService.post(\"/MobService/Index\", parameter).map(res => res.json()).subscribe(res => {\n      this.nativeService.hideLoading();\n      var result = JSON.parse(res.result);\n      console.info(result);\n      if (result.Code == 1) {\n        this.list = result.Data;\n        if (this.list.length == 0) {\n          this.noshow = true;\n        } else {\n          this.noshow = false;\n        }\n      } else {\n      }\n    });\n  }\n  search2() {\n\n    var userInfo = {\n      ipageStart: this.padding.ipageStart,\n      pageSize: this.padding.pageSize,\n      FranchiseeID: this.FranchiseeID,\n      goodName: this.message,\n      CouponID: this.CouponID\n    };\n    //console.info(userInfo);\n    var parameter = new Parameter();\n    parameter.jyh = \"1037\";\n    parameter.parm = JSON.stringify(userInfo);\n    this.nativeService.showLoading(\"获取中\");\n    this.httpService.post(\"/MobService/Index\", parameter).map(res => res.json()).subscribe(res => {\n      this.nativeService.hideLoading();\n      var result = JSON.parse(res.result);\n      //console.info(result);\n      if (result.Code == 1) {\n        this.list = result.Data;\n        if (this.list.length == 0) {\n          this.noshow = true;\n        } else {\n          this.noshow = false;\n        }\n      } else {\n      }\n    });\n  }\n  gotoGoodDetail(id) {\n    this.navCtrl.push(\"GoodDetailPage\", {\n      Fh: this.FranchiseeID,\n      goodsid: id,\n    })\n  }\n  doInfinite(infiniteScroll: InfiniteScroll) {\n    if (this.list.length < (this.padding.ipageStart + 1) * this.padding.pageSize) {\n      this.isshow = false;\n      return;\n    }\n    this.padding.ipageStart += 1;\n    var pageInfo = {\n      ipageStart: this.padding.ipageStart,\n      pageSize: this.padding.pageSize,\n      FranchiseeID: this.FranchiseeID,\n      goodName: this.message,\n      CouponID: this.CouponID\n    };\n    //console.info(pageInfo);\n    var parm = new Parameter();\n    parm.jyh = \"1037\";\n    parm.parm = JSON.stringify(pageInfo);\n    this.Inservice.getAsyncData(\"/MobService/Index\", parm).map(res => res.json()).subscribe((newData) => {\n      //console.info(newData)\n      setTimeout(() => {\n        var newList: any;\n        var msg = JSON.parse(newData.result);\n        newList = msg.Data;\n        if (newList != null || newList != undefined) {\n          for (var i = 0; i < newList.length; i++) {\n            this.list.push(newList[i]);\n          }\n        }\n        if (newData.length < this.padding.pageSize) {\n          this.isshow = false;\n        }\n        infiniteScroll.complete();\n      }, 1000);\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search/search.ts"],"sourceRoot":""}